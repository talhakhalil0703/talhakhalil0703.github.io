<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Data Partitioning — System Design — Talha Khalil</title>
  <meta name="description" content="Learn about Data Partitioning in System Design.">
  <meta name="author" content="Talha Khalil">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/assets/css/style.css">
</head>
<body>
  <!-- Navigation -->
  <nav class="navbar">
    <div class="navbar-inner">
      <a href="/" class="navbar-brand">
        <span class="navbar-avatar">TK</span>
        <span class="navbar-name">Talha Khalil</span>
      </a>
      <div class="navbar-links">
        <a href="/system-design/" class="nav-link active">Learn</a>
        <a href="/#projects" class="nav-link ">Projects</a>
        <a href="/#resume" class="nav-link ">Resume</a>
        <a href="/#blog" class="nav-link ">Blog</a>
      </div>
      <button class="navbar-menu-btn" aria-label="Toggle menu">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <line x1="3" y1="12" x2="21" y2="12"></line>
          <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </button>
    </div>
  </nav>

  <!-- Mobile Menu -->
  <div class="mobile-menu">
    <a href="/system-design/" class="mobile-menu-link ">Learn</a>
    <a href="/#projects" class="mobile-menu-link ">Projects</a>
    <a href="/#resume" class="mobile-menu-link ">Resume</a>
    <a href="/#blog" class="mobile-menu-link ">Blog</a>
  </div>

  <!-- Main Content -->
  <main>
    <div class="topic-layout">
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-pillar">PILLAR</div>
<div class="sidebar-pillar-name">System Design</div>
<div class="sidebar-section">
  <div class="sidebar-section-header">
    <span>Fundamentals</span>
    <button class="sidebar-toggle" aria-label="Toggle section">−</button>
  </div>
  <div class="sidebar-section-items">
    <a href="/system-design/requirements-gathering.html" class="sidebar-item">Requirements Gathering</a>
    <a href="/system-design/system-characteristics.html" class="sidebar-item">System Characteristics</a>
    <a href="/system-design/client-server-architecture.html" class="sidebar-item">Simple Client-Server Architecture</a>
    <a href="/system-design/apis.html" class="sidebar-item">APIs</a>
    <a href="/system-design/databases.html" class="sidebar-item">Databases</a>
    <a href="/system-design/vertical-vs-horizontal-scaling.html" class="sidebar-item">Vertical Scaling versus Horizontal Scaling</a>
    <a href="/system-design/load-balancer.html" class="sidebar-item">Load Balancer</a>
    <a href="/system-design/data-partitioning.html" class="sidebar-item active">Data Partitioning</a>
    <a href="/system-design/database-replication.html" class="sidebar-item">Database Replication</a>
    <a href="/system-design/caching.html" class="sidebar-item">Caching</a>
    <a href="/system-design/stateless-vs-stateful.html" class="sidebar-item">Stateless vs Stateful Web Servers</a>
    <a href="/system-design/data-centers-and-regions.html" class="sidebar-item">Data Centers and Regions</a>
    <a href="/system-design/message-queues.html" class="sidebar-item">Message Queues</a>
    <a href="/system-design/batch-vs-stream-processing.html" class="sidebar-item">Batch vs Stream Processing</a>
    <a href="/system-design/cap-theorem.html" class="sidebar-item">CAP Theorem</a>
    <a href="/system-design/acid-and-base.html" class="sidebar-item">ACID and BASE</a>
    <a href="/system-design/observability-and-dx.html" class="sidebar-item">Observability and Developer Experience</a>
  </div>
</div>
<div class="sidebar-section">
  <div class="sidebar-section-header">
    <span>Embedded Systems Design</span>
    <button class="sidebar-toggle" aria-label="Toggle section">−</button>
  </div>
  <div class="sidebar-section-items">
    <a href="/system-design/rtos-design.html" class="sidebar-item">RTOS Design & Task Scheduling</a>
    <a href="/system-design/embedded-memory-management.html" class="sidebar-item">Memory Management in Embedded Systems</a>
    <a href="/system-design/communication-protocols.html" class="sidebar-item">Communication Protocols (I2C, SPI, UART, CAN)</a>
    <a href="/system-design/ota-firmware-updates.html" class="sidebar-item">OTA Firmware Updates</a>
    <a href="/system-design/power-management.html" class="sidebar-item">Power Management & Energy-Efficient Design</a>
  </div>
</div>

    </aside>

    <!-- Content -->
    <article class="topic-content">
        <nav class="breadcrumb">
    <a href="/">LIBRARY</a>
    <span class="breadcrumb-sep">›</span>
    <a href="/system-design/">SYSTEM DESIGN</a>
    <span class="breadcrumb-sep">›</span>
    <span>FUNDAMENTALS</span>
    <span class="breadcrumb-sep">›</span>
    <span class="breadcrumb-current">DATA PARTITIONING</span>
  </nav>
        <div class="topic-header">
            <span class="topic-pillar-label">SYSTEM DESIGN</span>
            <h1 class="topic-title">Data Partitioning</h1>
            <div class="topic-meta">
                <span>February 14, 2026</span>
                <span class="topic-meta-sep">·</span>
                <span>3 min read</span>
            </div>
        </div>
        <div class="topic-body">
            <h2 id="why-partition-data">Why Partition Data?</h2><p>When a single database can&#39;t hold all your data or handle all your queries, you split it across multiple machines. This is <strong>data partitioning</strong> (also called <strong>sharding</strong>).</p>
<h2 id="horizontal-partitioning-sharding">Horizontal Partitioning (Sharding)</h2><p>Split rows across multiple databases. Each shard holds a subset of the data.</p>
<pre><code class="language-text">Shard 1: Users A-M
Shard 2: Users N-Z</code></pre><p>Each shard has the same schema but different data. This is the most common approach.</p>
<h2 id="vertical-partitioning">Vertical Partitioning</h2><p>Split columns across different databases. Put frequently accessed columns together and rarely accessed ones separately.</p>
<pre><code class="language-text">Database 1: user_id, name, email (hot data)
Database 2: user_id, bio, preferences, avatar_url (cold data)</code></pre><h2 id="partitioning-strategies">Partitioning Strategies</h2><h3 id="range-based-partitioning">Range-Based Partitioning</h3><p>Divide data by ranges of a key:</p>
<pre><code class="language-text">Shard 1: user_id 1 - 1,000,000
Shard 2: user_id 1,000,001 - 2,000,000
Shard 3: user_id 2,000,001 - 3,000,000</code></pre><p><strong>Pros:</strong> Simple, range queries are efficient within a shard</p>
<p><strong>Cons:</strong> <strong>Hotspots</strong> — if most new users are in the latest range, one shard gets hammered</p>
<h3 id="hash-based-partitioning">Hash-Based Partitioning</h3><p>Hash the partition key and assign based on the hash:</p>
<pre><code class="language-text">shard_id = hash(user_id) % num_shards</code></pre><p><strong>Pros:</strong> Even distribution of data across shards</p>
<p><strong>Cons:</strong> Range queries become expensive (must query all shards), adding shards requires rehashing</p>
<h3 id="consistent-hashing">Consistent Hashing</h3><p>Maps both data and servers to a hash ring. When a server is added/removed, only a fraction of data needs to move.</p>
<p>Used by: DynamoDB, Cassandra, Memcached</p>
<p><strong>Pros:</strong> Minimal data movement when scaling</p>
<p><strong>Cons:</strong> More complex to implement, can lead to uneven distribution without virtual nodes</p>
<h3 id="directory-based-partitioning">Directory-Based Partitioning</h3><p>A lookup service maps each key to its shard:</p>
<pre><code class="language-text">Lookup Table:
  user_123 → Shard 2
  user_456 → Shard 1
  user_789 → Shard 3</code></pre><p><strong>Pros:</strong> Flexible — can move data without changing logic</p>
<p><strong>Cons:</strong> Lookup service is a single point of failure and a bottleneck</p>
<h2 id="challenges-of-partitioning">Challenges of Partitioning</h2><h3 id="cross-shard-queries">Cross-Shard Queries</h3><p>JOINs across shards are expensive. You need to:</p>
<ul>
<li>Denormalize data (duplicate across shards)</li>
<li>Use application-level joins</li>
<li>Design your partition key to keep related data together</li>
</ul>
<h3 id="rebalancing">Rebalancing</h3><p>When a shard gets too large or too hot, you need to redistribute data. This is operationally complex and can impact performance.</p>
<h3 id="unique-ids">Unique IDs</h3><p>Auto-increment doesn&#39;t work across shards. Solutions:</p>
<ul>
<li><strong>UUID</strong> — universally unique, but not sortable</li>
<li><strong>Snowflake ID</strong> — Twitter&#39;s approach: timestamp + machine ID + sequence</li>
<li><strong>Database sequences</strong> — centralized ID generation service</li>
</ul>
<h3 id="transactions">Transactions</h3><p>ACID transactions across shards are very difficult. Options:</p>
<ul>
<li><strong>Two-phase commit (2PC)</strong> — slow but correct</li>
<li><strong>Saga pattern</strong> — sequence of local transactions with compensating actions</li>
<li><strong>Design around it</strong> — keep transaction boundaries within a single shard</li>
</ul>
<h2 id="choosing-a-partition-key">Choosing a Partition Key</h2><p>The partition key determines data distribution. A good key:</p>
<ul>
<li><strong>Distributes evenly</strong> — no hotspots</li>
<li><strong>Supports your query patterns</strong> — queries should hit one shard when possible</li>
<li><strong>Rarely changes</strong> — repartitioning on key changes is expensive</li>
</ul>
<p>Examples:</p>
<ul>
<li>User-based app → <code>user_id</code></li>
<li>E-commerce → <code>order_id</code> or <code>customer_id</code></li>
<li>Time-series → <code>timestamp</code> (with care for hotspots)</li>
</ul>

        </div>
    </article>

    <!-- Table of Contents -->
    <aside class="toc">
        <div class="toc-header">IN THIS ARTICLE</div>
        <div class="toc-links">
            <a href="#why-partition-data" class="toc-link ">Why Partition Data?</a>
<a href="#horizontal-partitioning-sharding" class="toc-link ">Horizontal Partitioning (Sharding)</a>
<a href="#vertical-partitioning" class="toc-link ">Vertical Partitioning</a>
<a href="#partitioning-strategies" class="toc-link ">Partitioning Strategies</a>
<a href="#range-based-partitioning" class="toc-link toc-sub">Range-Based Partitioning</a>
<a href="#hash-based-partitioning" class="toc-link toc-sub">Hash-Based Partitioning</a>
<a href="#consistent-hashing" class="toc-link toc-sub">Consistent Hashing</a>
<a href="#directory-based-partitioning" class="toc-link toc-sub">Directory-Based Partitioning</a>
<a href="#challenges-of-partitioning" class="toc-link ">Challenges of Partitioning</a>
<a href="#cross-shard-queries" class="toc-link toc-sub">Cross-Shard Queries</a>
<a href="#rebalancing" class="toc-link toc-sub">Rebalancing</a>
<a href="#unique-ids" class="toc-link toc-sub">Unique IDs</a>
<a href="#transactions" class="toc-link toc-sub">Transactions</a>
<a href="#choosing-a-partition-key" class="toc-link ">Choosing a Partition Key</a>
        </div>
    </aside>
</div>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-inner">
      <p>&copy; 2026 Talha Khalil. All rights reserved.</p>
      <div class="footer-links">
        <a href="https://github.com/talhakhalil0703" target="_blank" rel="noopener">GitHub</a>
        <a href="https://talhakhalil.ca" target="_blank" rel="noopener">Website</a>
      </div>
    </div>
  </footer>

  <script src="/assets/js/main.js"></script>
</body>
</html>
